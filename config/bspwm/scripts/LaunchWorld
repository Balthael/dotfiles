#! /bin/sh

# Author 	 -  z0mbi3
# Source 	 -  https://github.com/gh0stzk/dotfiles
# Maintainer -  z0mbi3.zk@protonmail.com

bspdir="$HOME/.config/bspwm"
polydir="$HOME/.config/bspwm/rices/$RICETHEME/polybar"

function launch() {
  local running
  running="$(pidof "$1")"
  [ "$running" ] && kill -9 $(pidof $1)
  eval "$* &"
}
	
function killeww() {
  if [[ `pidof eww` ]]; then 
		pkill eww
  fi
}
function ResetTermite() {
  if [[ `pidof termite` ]]; then 
		killall -USR1 termite
  fi
}
function ReloadTermite() {
  if [ -f "$HOME/.config/termite/config" ]; then
		cat $HOME/.config/bspwm/rices/$RICETHEME/termiterc > $HOME/.config/termite/config
		ResetTermite
  else
		mkdir -p $HOME/.config/termite/ && touch $HOME/.config/termite/config
		cat $HOME/.config/bspwm/rices/$RICETHEME/termiterc > $HOME/.config/termite/config
		ResetTermite
  fi
}

function SetGirlFriendRice() {
	
	case $RICETHEME in
	
		emilia)
		
		  bspc config border_width                  1
		  bspc config top_padding                   60
		  bspc config bottom_padding                5

		  bspc config normal_border_color		"#202132" 
		  bspc config active_border_color		"#202132"
		  bspc config focused_border_color		"#202132"
		  bspc config presel_feedback_color		"#070219"
		  		  
		  killeww
		  polybar-msg cmd quit
		  polybar -q emi-bar -c ${polydir}/config.ini & disown
		  launch dunst -config ${bspdir}/dunstrc-dark &
		  
		  ;;
			
		jan)
		
		  bspc config border_width                  1
		  bspc config top_padding                   60
		  bspc config bottom_padding                5

		  bspc config normal_border_color		"#4C3A6D" 
		  bspc config active_border_color	    "#4C3A6D"
		  bspc config focused_border_color	  	"#785DA5"
		  bspc config presel_feedback_color		"#070219"
		  
		  killeww
		  polybar-msg cmd quit
		  polybar -q main -c ${polydir}/config.ini & disown
		  launch dunst -config ${bspdir}/dunstrc-dark &
		  
		  ;;
		    
		aline)
		
		  bspc config border_width                  1
		  bspc config top_padding                   50
		  bspc config bottom_padding                5

		  bspc config normal_border_color		"#000000" 
		  bspc config active_border_color	    "#000000"
		  bspc config focused_border_color		"#000000"
		  bspc config presel_feedback_color		"#070219"
		  
		  killeww
		  polybar-msg cmd quit
		  polybar -q aline-bar -c ${polydir}/config.ini & disown
		  launch dunst -config ${bspdir}/dunstrc-light &
		  
		  ;;
		  
		isabel)
		
		  bspc config border_width                  1
		  bspc config top_padding                   5
		  bspc config bottom_padding                45

		  bspc config normal_border_color		"#333a48" 
		  bspc config active_border_color	    "#333a48"
		  bspc config focused_border_color		"#333a48"
		  bspc config presel_feedback_color		"#4f4f5b"
		  
		  killeww
		  polybar-msg cmd quit
		  polybar -q isa-bar -c ${polydir}/config.ini & disown
		  launch dunst -config ${bspdir}/dunstrc-dark &
		  
		  ;;
		  
		cynthia)
		
		  bspc config border_width                  0
		  bspc config top_padding                   45
		  bspc config bottom_padding                5

		  bspc config normal_border_color		"#4C3A6D" 
		  bspc config active_border_color	    "#4C3A6D"
		  bspc config focused_border_color		"#785DA5"
		  bspc config presel_feedback_color		"#070219"
		  
		  killeww
		  polybar-msg cmd quit
		  polybar -q cyn-bar -c ${polydir}/config.ini & disown
		  launch dunst -config ${bspdir}/dunstrc-dark &
		  
		  ;;
		  
		silvia)
		
		  bspc config border_width                  1
		  bspc config top_padding                   45
		  bspc config bottom_padding                5

		  bspc config normal_border_color		"#bdae93" 
		  bspc config active_border_color	    "#bdae93"
		  bspc config focused_border_color		"#bdae93"
		  bspc config presel_feedback_color		"#4f4f5b"

		  killeww
		  polybar-msg cmd quit
		  polybar -q cata-bar -c ${polydir}/config.ini & disown
		  launch dunst -config ${bspdir}/dunstrc-dark &
		  
		  ;;
		
		melissa)
		
		  bspc config border_width                  2
		  bspc config top_padding                   42
		  bspc config bottom_padding                40

		  bspc config normal_border_color		"#4c566a" 
		  bspc config active_border_color	    "#4c566a"
		  bspc config focused_border_color		"#4c566a"
		  bspc config presel_feedback_color		"#4f4f5b"

		  killeww
		  polybar-msg cmd quit
		  polybar -q mel-bar -c ${polydir}/config.ini & disown
		  polybar -q mel2-bar -c ${polydir}/config.ini & disown
		  launch dunst -config ${bspdir}/dunstrc-dark &
		  
		  ;;
		  
		pamela)
		
		  bspc config border_width                  0
		  bspc config top_padding                   60
		  bspc config bottom_padding                5

		  bspc config normal_border_color		"#bdae93" 
		  bspc config active_border_color	    "#bdae93"
		  bspc config focused_border_color		"#bdae93"
		  bspc config presel_feedback_color		"#4f4f5b"
		  
		  killeww
		  polybar-msg cmd quit
		  polybar -q pam1 -c ${polydir}/config.ini & disown
		  polybar -q pam2 -c ${polydir}/config.ini & disown
		  polybar -q pam3 -c ${polydir}/config.ini & disown
		  polybar -q pam4 -c ${polydir}/config.ini & disown
		  polybar -q pam5 -c ${polydir}/config.ini & disown
		  polybar -q pam6 -c ${polydir}/config.ini & disown
		  launch dunst -config ${bspdir}/dunstrc-dark &
		  
		  ;;
		  
		andrea)
		
		  bspc config border_width                  2
		  bspc config top_padding                   60
		  bspc config bottom_padding                5

		  bspc config normal_border_color		"#161616" 
		  bspc config active_border_color	    "#161616"
		  bspc config focused_border_color		"#161616"
		  bspc config presel_feedback_color		"#4f4f5b"
		  
		  polybar-msg cmd quit 
		  launch dunst -config ${bspdir}/dunstrc-light &
		  ~/.config/bspwm/rices/$RICETHEME/arin/launch_bar
		  
		  ;;
		  
	esac		
}

ReloadTermite

function AutoStartApps() {
	
	launch sxhkd -c ${bspdir}/sxhkdrc &
	launch picom --config ${bspdir}/rices/$RICETHEME/picom.conf &
	launch /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
	launch feh --no-fehbg --bg-fill $wallimage
	#nitrogen --restore &
	xsetroot -cursor_name left_ptr
	
}
